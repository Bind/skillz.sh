<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>code-review - skillz.sh</title>
  <meta name="description" content="Skills for AI coding agents">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  <style>
    body { font-family: system-ui, -apple-system, sans-serif; }
    pre { background: #18181b; border-radius: 0.5rem; padding: 1rem; overflow-x: auto; border: 1px solid #27272a; }
    pre code { background: transparent !important; padding: 0 !important; }
    code { font-family: ui-monospace, monospace; font-size: 0.875rem; }
    :not(pre) > code { background: #27272a; padding: 0.125rem 0.375rem; border-radius: 0.25rem; }
    .hljs { background: transparent !important; }
  </style>
</head>
<body class="bg-zinc-950 text-zinc-100 min-h-screen">
  <div class="border-b border-zinc-800">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <a href="/" class="text-xl font-bold hover:text-zinc-300">skillz.sh</a>
      <nav class="flex items-center gap-6 text-sm">
        <a href="/" class="text-white">Skills</a>
        <a href="/agents.html" class="text-zinc-400 hover:text-white">Agents</a>
        <a href="/getting-started.html" class="text-zinc-400 hover:text-white">Getting Started</a>
        <a href="https://github.com/Bind/skillz.sh" class="text-zinc-400 hover:text-white">GitHub</a>
      </nav>
    </div>
  </div>
  <div class="border-b border-zinc-800 bg-zinc-900/50"><div class="max-w-6xl mx-auto px-6 py-2 text-sm text-zinc-500"><a href="/" class="hover:text-white">Skills</a> <span class="mx-2">/</span> <span class="text-zinc-300">code-review</span></div></div>
  <main class="max-w-6xl mx-auto px-6 py-8">
    
    <div class="flex flex-col lg:flex-row gap-8">
      <div class="flex-1 min-w-0">
        <div class="flex items-center gap-3 mb-2">
          <span class="px-2 py-1 text-xs rounded-md bg-zinc-800 text-zinc-400">v0.1.0-beta</span><span class="px-2 py-1 text-xs rounded-md bg-zinc-800 text-zinc-400 capitalize">github</span>
        </div>
        <h1 class="text-3xl font-bold mb-2">code-review</h1>
        <p class="text-lg text-zinc-400 mb-6">Automated PR code review with multi-agent analysis</p>
        
        <div class="mb-8 p-4 rounded-lg border border-zinc-800 bg-zinc-900/50">
          <div class="flex items-center justify-between gap-4">
            <code class="text-sm text-zinc-300">bunx skz add code-review</code>
            <button onclick="navigator.clipboard.writeText('bunx skz add code-review')" class="text-xs px-3 py-1 rounded-md bg-zinc-800 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors">Copy</button>
          </div>
        </div>

        
      <div class="mt-4 text-sm text-zinc-500">
        <span class="text-zinc-400">Requires:</span> <a href="/skills/github-pr.html" class="text-zinc-300 underline hover:text-white">github-pr</a>
      </div>
    
        
        
        
      <div class="mt-6 p-4 rounded-lg border border-amber-900/50 bg-amber-950/20">
        <h3 class="text-sm font-medium text-amber-400 mb-2">Setup Required</h3>
        <p class="text-sm text-zinc-400">Requires GitHub CLI (gh). Install: brew install gh && gh auth login</p>
      </div>
    
        

        <div class="mt-8 prose prose-invert max-w-none">
          <p class="my-3 text-zinc-400">Provide a code review for the given pull request.</p>
<h2 class="text-xl font-semibold mt-8 mb-3 pb-2 border-b border-zinc-800">Prerequisites</h2>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4"><a href="https://cli.github.com/" class="text-zinc-300 underline hover:text-white">GitHub CLI</a> installed and authenticated</li>
<li class="ml-4"><code>github-pr</code> skill installed (bundled automatically)</li>
<li class="ml-4">AGENTS.md files in your repository (optional but recommended)</li>
</ul>
<h2 class="text-xl font-semibold mt-8 mb-3 pb-2 border-b border-zinc-800">Slash Command</h2>
<h3 class="text-lg font-semibold mt-6 mb-2"><code>/code-review [--comment]</code></h3>
<p class="my-3 text-zinc-400">Performs automated code review on a pull request using multiple specialized agents.</p>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">Options:</strong></p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4"><code>--comment</code> - Post the review as inline comments on the PR (default: outputs to terminal only)</li>
</ul>
<pre><code class="language-bash">/code-review           # Output to terminal
/code-review --comment # Post as PR comments</code></pre>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">Example:</strong></p>
<h2 class="text-xl font-semibold mt-8 mb-3 pb-2 border-b border-zinc-800">Workflow</h2>
<p class="my-3 text-zinc-400">Follow these steps precisely:</p>
<h3 class="text-lg font-semibold mt-6 mb-2">Step 1: Pre-check</h3>
<p class="my-3 text-zinc-400">Check if any of the following are true:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">The pull request is closed</li>
<li class="ml-4">The pull request is a draft</li>
<li class="ml-4">The pull request does not need code review (e.g. automated PR, trivial change)</li>
<li class="ml-4">Claude/AI has already commented on this PR</li>
</ul>
<p class="my-3 text-zinc-400">Run the check script:</p>
<pre><code class="language-bash">bun .opencode/skill/github-pr/check-review-needed.js</code></pre>
<p class="my-3 text-zinc-400">If <code>shouldReview</code> is <code>false</code>, stop and do not proceed.</p>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">Note:</strong> Still review Claude/AI-generated PRs - only skip if Claude has already commented on the PR.</p>
<h3 class="text-lg font-semibold mt-6 mb-2">Step 2: Gather Guidelines</h3>
<p class="my-3 text-zinc-400">Run the guideline discovery script:</p>
<pre><code class="language-bash">bun .opencode/skill/github-pr/list-guideline-files.js --json</code></pre>
<p class="my-3 text-zinc-400">This returns file paths (not contents) for relevant AGENTS.md files:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Root AGENTS.md file, if it exists</li>
<li class="ml-4">AGENTS.md files in directories containing files modified by the PR</li>
</ul>
<p class="my-3 text-zinc-400">For each guideline file found, fetch its contents to use in compliance checking.</p>
<h3 class="text-lg font-semibold mt-6 mb-2">Step 3: Summarize PR</h3>
<p class="my-3 text-zinc-400">Launch a haiku agent to view the PR and return a summary including:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">PR title and description</li>
<li class="ml-4">List of changed files with brief descriptions</li>
<li class="ml-4">Overall nature of the changes</li>
</ul>
<p class="my-3 text-zinc-400">Use the Task tool with a haiku agent.</p>
<h3 class="text-lg font-semibold mt-6 mb-2">Step 4: Parallel Review</h3>
<p class="my-3 text-zinc-400">Launch 4 agents in parallel to independently review the changes. Each agent should return a list of issues with:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Description of the issue</li>
<li class="ml-4">Reason it was flagged (e.g., "AGENTS.md compliance", "bug", "logic error")</li>
<li class="ml-4">File path and line number(s)</li>
<li class="ml-4">Confidence score (0-100)</li>
</ul>
<p class="my-3 text-zinc-400">Provide each agent with the PR title, description, and summary from Step 3.</p>
<h4 class="text-base font-semibold mt-5 mb-2 text-zinc-200">Agents 1 & 2: AGENTS.md Compliance (Sonnet)</h4>
<p class="my-3 text-zinc-400">Audit changes for AGENTS.md compliance in parallel. When evaluating compliance:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Only consider AGENTS.md files that share a file path with the file being reviewed (or its parent directories)</li>
<li class="ml-4">Verify the guideline explicitly mentions the rule being violated</li>
<li class="ml-4">Quote the exact rule from AGENTS.md in the issue description</li>
</ul>
<h4 class="text-base font-semibold mt-5 mb-2 text-zinc-200">Agent 3: Bug Detection (Opus)</h4>
<p class="my-3 text-zinc-400">Scan for obvious bugs. Focus only on the diff itself without reading extra context:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Flag only significant bugs that will cause incorrect behavior</li>
<li class="ml-4">Ignore nitpicks and likely false positives</li>
<li class="ml-4">Do not flag issues that cannot be validated from the diff alone</li>
</ul>
<h4 class="text-base font-semibold mt-5 mb-2 text-zinc-200">Agent 4: Logic Analysis (Opus)</h4>
<p class="my-3 text-zinc-400">Look for problems that exist in the introduced code:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Security issues</li>
<li class="ml-4">Incorrect logic</li>
<li class="ml-4">Race conditions</li>
<li class="ml-4">Resource leaks</li>
</ul>
<p class="my-3 text-zinc-400">Only flag issues within the changed code.</p>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">CRITICAL: HIGH SIGNAL ONLY</strong></p>
<p class="my-3 text-zinc-400">We want:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Objective bugs that will cause incorrect behavior at runtime</li>
<li class="ml-4">Clear, unambiguous AGENTS.md violations where you can quote the exact rule being broken</li>
</ul>
<p class="my-3 text-zinc-400">We do NOT want:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Subjective concerns or "suggestions"</li>
<li class="ml-4">Style preferences not explicitly required in AGENTS.md</li>
<li class="ml-4">Potential issues that "might" be problems</li>
<li class="ml-4">Anything requiring interpretation or judgment calls</li>
</ul>
<p class="my-3 text-zinc-400">If you are not certain an issue is real, do not flag it. False positives erode trust and waste reviewer time.</p>
<h3 class="text-lg font-semibold mt-6 mb-2">Step 5: Validate Issues</h3>
<p class="my-3 text-zinc-400">For each issue found in Step 4, launch parallel subagents to validate the issue.</p>
<p class="my-3 text-zinc-400">The validator receives:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">PR title and description</li>
<li class="ml-4">Issue description and location</li>
<li class="ml-4">Relevant code context</li>
</ul>
<p class="my-3 text-zinc-400">The validator's job is to confirm:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">The issue is real and verifiable</li>
<li class="ml-4">For AGENTS.md issues: the rule exists and applies to this file</li>
<li class="ml-4">The issue was introduced in this PR (not pre-existing)</li>
</ul>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">Agent types:</strong></p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Use Opus subagents for bugs and logic issues</li>
<li class="ml-4">Use Sonnet agents for AGENTS.md violations</li>
</ul>
<h3 class="text-lg font-semibold mt-6 mb-2">Step 6: Filter Results</h3>
<p class="my-3 text-zinc-400">Filter out any issues that were not validated in Step 5. This gives our list of high signal issues for review.</p>
<h3 class="text-lg font-semibold mt-6 mb-2">Step 7: Confirm and Post Results</h3>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">If no issues were found:</strong> Output "No issues found" to the terminal. Do not post any comment to the PR.</p>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">If issues were found and <code>--comment</code> flag is provided:</strong></p>
<p class="my-3 text-zinc-400">Present a summary to the user for confirmation:</p>
<pre><code class="language-text">## Code Review Summary

Found {N} issue(s):

1. **{file}:{line}** - {brief description}
2. **{file}:{line}** - {brief description}
...

Post these as inline comments to PR #{number}? (y/n)</code></pre>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">If user confirms (y):</strong> Post inline comments using:</p>
<pre><code class="language-bash">bun .opencode/skill/github-pr/post-inline-comment.js &lt;pr-number&gt; \
  --path &lt;file&gt; \
  --line &lt;line&gt; \
  [--start-line &lt;start&gt;] \
  --body &quot;&lt;comment&gt;&quot;</code></pre>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">If user declines (n):</strong> Do not post comments. The review output remains in the terminal.</p>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">If <code>--comment</code> flag is NOT provided:</strong> Output the review to terminal only, do not prompt for confirmation.</p>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">Comment format:</strong></p>
<p class="my-3 text-zinc-400">For small fixes (up to 5 lines changed), include a suggestion:</p>
<pre><code class="language-markdown">Brief description of the issue (no &quot;Bug:&quot; prefix)
</code></pre>
<pre><code class="language-text"></code></pre>
<p class="my-3 text-zinc-400">corrected code here</p>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">Suggestions must be COMPLETE.</strong> If a fix requires additional changes elsewhere (e.g., renaming a variable requires updating all usages), do NOT use a suggestion block. The author should be able to click "Commit suggestion" and have a working fix - no followup work required.</p>
<p class="my-3 text-zinc-400">For larger fixes (6+ lines, structural changes, or changes spanning multiple locations), do NOT use suggestion blocks. Instead: 1. Describe what the issue is 2. Explain the suggested fix at a high level 3. Include a copyable prompt for Claude Code that the user can use to fix the issue, formatted as:    ``<code>    Fix [file:line]: [brief description of issue and suggested fix]    </code>``</p>
<p class="my-3 text-zinc-400"><strong class="text-zinc-200">IMPORTANT:</strong> Only post ONE comment per unique issue. Do not post duplicate comments.</p>
<h2 class="text-xl font-semibold mt-8 mb-3 pb-2 border-b border-zinc-800">False Positives (Do NOT Flag)</h2>
<p class="my-3 text-zinc-400">Use this list when evaluating issues in Steps 4 and 5:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Pre-existing issues</li>
<li class="ml-4">Something that appears to be a bug but is actually correct</li>
<li class="ml-4">Pedantic nitpicks that a senior engineer would not flag</li>
<li class="ml-4">Issues that a linter will catch (do not run the linter to verify)</li>
<li class="ml-4">General code quality concerns (e.g., lack of test coverage, general security issues) unless explicitly required in AGENTS.md</li>
<li class="ml-4">Issues mentioned in AGENTS.md but explicitly silenced in the code (e.g., via a lint ignore comment)</li>
</ul>
<h2 class="text-xl font-semibold mt-8 mb-3 pb-2 border-b border-zinc-800">Code Link Format</h2>
<p class="my-3 text-zinc-400">When linking to code in inline comments, follow this exact format precisely, otherwise the Markdown preview won't render correctly:</p>
<pre><code class="language-text">https://github.com/owner/repo/blob/[full-sha]/path/file.ext#L[start]-L[end]</code></pre>
<p class="my-3 text-zinc-400">Requirements:</p>
<ul class="my-3 list-disc list-inside space-y-1">
<li class="ml-4">Must use full git SHA (not abbreviated)</li>
<li class="ml-4">Repo name must match the repo you're code reviewing</li>
<li class="ml-4"><code>#L</code> notation for line range</li>
<li class="ml-4">Line range format: <code>L[start]-L[end]</code></li>
<li class="ml-4">Provide at least 1 line of context before and after</li>
</ul>
<h2 class="text-xl font-semibold mt-8 mb-3 pb-2 border-b border-zinc-800">Confidence Scoring</h2>
<p class="my-3 text-zinc-400">Each issue is scored 0-100:</p>
<table class="my-4 w-full border-collapse text-sm">
<tbody>
<tr><th class="px-3 py-2 border border-zinc-800 bg-zinc-900 text-left font-medium">Score</th><th class="px-3 py-2 border border-zinc-800 bg-zinc-900 text-left font-medium">Meaning</th></tr>
<tr><td class="px-3 py-2 border border-zinc-800">0</td><td class="px-3 py-2 border border-zinc-800">Not confident, false positive</td></tr>
<tr><td class="px-3 py-2 border border-zinc-800">25</td><td class="px-3 py-2 border border-zinc-800">Somewhat confident, might be real</td></tr>
<tr><td class="px-3 py-2 border border-zinc-800">50</td><td class="px-3 py-2 border border-zinc-800">Moderately confident, real but minor</td></tr>
<tr><td class="px-3 py-2 border border-zinc-800">75</td><td class="px-3 py-2 border border-zinc-800">Highly confident, real and important</td></tr>
<tr><td class="px-3 py-2 border border-zinc-800">100</td><td class="px-3 py-2 border border-zinc-800">Absolutely certain, definitely real</td></tr>
</tbody>
</table>
<p class="my-3 text-zinc-400">Only issues scoring <strong class="text-zinc-200">80 or higher</strong> are reported.</p>
        </div>
      </div>
    </div>
  
  </main>
  <footer class="border-t border-zinc-800 mt-16">
    <div class="max-w-6xl mx-auto px-6 py-8 text-sm text-zinc-500">
      <p>Built for <a href="https://opencode.ai" class="underline hover:text-white">OpenCode</a> and <a href="https://claude.ai" class="underline hover:text-white">Claude Code</a></p>
    </div>
  </footer>
</body>
</html>