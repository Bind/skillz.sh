---
import Icon from "./Icon.astro";

interface Props {
  code: string;
  class?: string;
}

const { code, class: className } = Astro.props;
---

<div class:list={["relative group", className]}>
  <pre class="bg-gray-50 text-gray-700 border border-gray-300 rounded-lg p-4 pr-12 overflow-x-auto"><code class="text-sm font-mono">{code}</code></pre>
  <button
    onclick={`navigator.clipboard.writeText('${code.replace(/'/g, "\\'")}')`}
    class="absolute top-3 right-3 p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-200 transition-colors opacity-0 group-hover:opacity-100"
    title="Copy to clipboard"
  >
    <Icon name="copy" size="sm" />
  </button>
</div>
